# Responsively - 响应式预览工具

一个轻量级的响应式设计预览工具，可以同时在多个设备尺寸下预览网页，支持同步操作和分页显示。

![Demo Screenshot](https://ji-zhu.com/static/pics/responsively_compact.gif)

> 图中展示的网站是 [记住](https://ji-zhu.com) (https://ji-zhu.com) - 一个相当不错的小众学习网站，值得一看。

## 功能特性

- 🖥️ **多设备预览**：同时在多个设备尺寸下预览网页
- 📱 **设备分组**：预设4xl桌面、2xl超大桌面、xl大屏、lg中大屏、md中等和移动设备(<md)分组
- 🔄 **同步操作**：在一个设备中的操作可同步到其他设备（同源时）
- 📄 **分页显示**：网格模式下支持分页，避免性能问题
- 🔢 **页码跳转**：网格模式下支持指定页码直接跳转
- 🎛️ **布局切换**：支持竖版和网格两种显示模式
- 🔄 **刷新功能**：支持单个iframe刷新和全部iframe批量刷新
- ⚡ **性能优化**：延迟加载iframe，避免浏览器崩溃

## 快速开始

### 集成到现有应用
**重要**：为了实现同步操作功能，必须将工具部署到与目标应用相同的域名下。

#### Nginx配置
```nginx
location /tools/responsively {
    alias /path/to/your/responsively.html;
    add_header Content-Type text/html;
    
    # 可选：禁用缓存方便调试
    add_header Cache-Control "no-cache, no-store, must-revalidate";
    add_header Pragma "no-cache";
    add_header Expires "0";
}
```

#### 部署示例
假设你的应用运行在 `http://localhost`，则：
1. 将 `responsively.html` 放到服务器路径
2. 通过 `http://localhost/tools/responsively` 访问工具
3. 工具会在多个iframe中加载 `http://localhost`（TARGET_URL）
4. 由于主页面和iframe都在同一域名下，同步操作功能可正常工作

## 使用方法

1. **选择设备分组**：从下拉菜单中选择要预览的设备分组
2. **切换显示模式**：
   - **竖版**：设备垂直排列，最多显示6个
   - **网格**：设备网格排列，每行4个，支持分页
3. **启用同步操作**：勾选"同步操作"复选框（仅同源时有效）
4. **分页导航**：在网格模式下使用上一页/下一页按钮，或输入页码直接跳转
5. **刷新操作**：
   - 点击设备标题栏的"⟲"按钮刷新单个iframe
   - 点击控制栏的"刷新全部"按钮批量刷新所有iframe

## 设备分组

> **说明**：所有设备尺寸数据均来自真实场景的设备，极具参考性和实用价值。

### 4xl分组（桌面设备）
- 2560x1271, 2560x919, 2552x1284
- 2560x1440, 2560x1313, 3064x1580
- 3440x1243, 2844x1464, 2552x970
- 2752x983, 3840x2071, 3024x1764
- 2552x1284

### 2xl分组（超大桌面设备）
- 1707x898, 1536x703, 1560x1083, 1707x932
- 1600x1200, 1707x791, 1600x1600, 1600x739
- 1680x904, 1800x833, 1536x825, 1536x695
- 1707x979, 1707x759, 1680x962, 1680x815
- 1699x941, 1872x927, 1800x1004, 1659x758
- 1659x941, 1728x992, 1865x937

### <md分组（移动设备）
- 360x706, 360x680, 360x560, 360x740
- 393x754, 393x851, 393x599
- 390x753, 390x844, 390x660
- 412x732, 412x820, 412x544
- 400x780, 384x745, 384x696
- 414x804, 430x834, 375x724
- 428x835, 402x774

### xl分组（超大屏设备）
- 1440x754, 1440x666, 1440x833
- 1280x559, 1280x800, 1280x886
- 1512x823, 1512x864, 1512x734
- 1528x738, 1528x851, 1488x719
- 1488x882, 1366x607, 1366x768
- 1366x950

### lg分组（大屏设备）
- 1024x1024, 1024x569, 1024x594
- 1024x1006, 1253x1250

### md分组（中等设备）
- 800x600, 810x1010, 988x860
- 1016x1024, 834x1120

## 技术说明

### 同步操作与TARGET_URL的关系
同步操作功能的核心在于主页面与TARGET_URL必须同源：

#### 同源示例（✅ 可以同步）
- 主页面：`http://localhost/tools/responsively`
- TARGET_URL：`http://localhost`
- 结果：同一域名，同步操作正常工作

#### 跨域示例（❌ 无法同步）
- 主页面：`http://localhost:8080/responsively.html`
- TARGET_URL：`http://localhost`
- 结果：不同端口，浏览器阻止iframe访问

#### 关键要点
1. **域名必须相同**：主页面和TARGET_URL的域名必须一致
2. **端口必须相同**：即使域名相同，端口不同也会被视为跨域
3. **协议必须相同**：http和https不能混用
4. **部署位置很关键**：工具必须部署在目标应用的服务器上

### 性能优化
- **延迟加载**：网格模式下iframe按顺序加载，间隔1秒
- **内存管理**：切换分组时清理旧iframe，避免内存泄漏
- **分页限制**：每页最多8个设备，避免浏览器崩溃

## 自定义配置

### 修改目标URL
在代码中修改`TARGET_URL`变量：
```javascript
const TARGET_URL = "http://localhost"; // 改为你的目标URL
```

### 添加设备尺寸
在`GROUPS`数组中添加新的设备配置：
```javascript
{
  name: "自定义分组",
  devices: [
    { name: "1920x1080", width: 1920, height: 1080 },
    // 添加更多设备...
  ]
}
```

### 修改分页大小
修改`PAGE_SIZE`常量：
```javascript
const PAGE_SIZE = 8; // 每页显示的设备数量
```

## 故障排除

### 问题：iframe无法加载
- 检查目标URL是否可访问
- 确认没有CORS限制

### 问题：同步操作不工作
- 确保主页面和目标页面同源
- 检查浏览器控制台是否有跨域错误

### 问题：浏览器崩溃
- 减少同时显示的设备数量
- 使用分页功能
- 检查系统内存使用情况

## 浏览器支持

- Chrome 60+
- Firefox 55+
- Safari 12+
- Edge 79+

## 许可证

MIT License